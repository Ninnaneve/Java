## 5.1 程序流程控制介绍

在程序中，程序运行的流程控制决定程序是如何执行的，是我们必须掌握的，主要有三大流程控制语句：

1. 顺序控制
2. 分支控制
3. 循环控制

## 5.2 顺序控制

程序从上到下逐行执行，中间没有任何判断和跳转。

Java定义变量时采用合法的**向前引用**。

## 5.3 分支控制 if-else

让程序有选择的的执行,分支控制有三种：

1. 单分支 if
2. 双分支 if-else
3. 多分支 if-else if -....-else

-----------

单分支基本语法：

```java
if(条件表达式){
    执行代码块;（可以有多条语句）
}
```

当条件表达式为true，就会执行{}的代码；如果为false，就不执行。特别的，如果{}中只有一条语句，则可以不用{}，但建议写上。

![image-20220614083215748](https://cdn.jsdelivr.net/gh/Ninnaneve/my_pic@main/image-20220614083215748.png)

---------

双分支基本语法：

```java
if(条件表达式){
    执行代码块1;
}
else{
    执行代码块2;
}
```

当条件表达式成立，则执行代码块1，否则执行代码块2。如果指定代码块中只有一条语句，则可以不用{}。

![image-20220614083234921](https://cdn.jsdelivr.net/gh/Ninnaneve/my_pic@main/image-20220614083234921.png)

----------

多分支基本语法：

```java
if(条件表达式2){
    执行代码块1;
}
else if(条件表达式2){
    执行代码块2;
}
...
else{
    执行代码块n;
}
```

特别说明：

- 多分支可以没有else，如果所有的条件表达式都不成立，则一个执行入口都没有
- 如果有else，如果所有的条件表达式都不成立，则默认执行else代码块

![image-20220614083642415](https://cdn.jsdelivr.net/gh/Ninnaneve/my_pic@main/image-20220614083642415.png)

注意：在利用多分支判断输入数字属于某一范围时，需要通过**嵌套分支控制输入范围**，以及引入**异常处理机制**控制**变量输入类型**

P.S. 一道易错题

```java
boolean b = true;
if (b = false) // 这里的判断结果就直接为false，同时b也变为false
    System.out.println("a");
else if (b)
    System.out.println("b");
else if (!b)
    System.out.println("c");
else
    System.out.println("d");
```



## 5.5 嵌套分支

在一个分支结构中又完整的嵌套了另一个完整的分支结构，里面的分支的结构称为**内层分支**，外面的分支结构称为**外层分支**。建议不要超过 3层，因为可读性不好 

基本语法：

```java
if(){
    if(){
    }
    else(){
    }
}
```

> 注意：若在执行代码块中定义了新的变量，该变量只在这个语句块中有效！

## 5.6 switch 分支结构

基本语法：

```java
switch(表达式){
        case 常量1:
        语句块1;
        break;
        case 常量2:
        语句块2;
        break;
        ...
        case 常量n:
        语句块n;
        break;
        default:
        default语句块;
        break;
}
```

解读：

- switch关键字，表示switch分支
- 表达式对应一个值，表达式的值等于哪个常量，就执行相应语句块，若有break则退出，否则继续执行下一个语句块
- 若一个都没有匹配上，则执行default语句块

> 只要有值返回，都可以称作一个表达式

![image-20220614104841170](https://cdn.jsdelivr.net/gh/Ninnaneve/my_pic@main/image-20220614104841170.png)

注意事项和细节讨论：

- 表达式的数据类型，应和case后的**常量类型一致**，或者是可以**自动转成的类型**，如输入char，常量为int
- switch(表达式)的返回值必须是：byte, short, int, char, enum, String
- case子句中的值必须是常量或是常量表达式，不能是变量
- default子句是可选的
- break语句用来在执行完一个case分支后使程序跳出switch语句块；如果没有写break，程序会顺序执行到switch结尾，除非执行到break，这样的操作叫”穿透“

-----

switch 和 if 的比较：

- 如果判断的具体数值不多，而且符合 byte、 short 、int、 char, enum, String 这 6 种类型。虽然两个语句都可以使用，建议使用 switch 语句。
- 其他情况：对区间判断，对结果为 boolean 类型判断，使用 if，if 的使用范围更广



## 5.7 for 循环控制

让你的代码可以循环的执行

基本语法：

```java
for (循环变量初始化;循环条件;循环变量迭代){
    循环操作（可以多条语句）;
}
```

说明：

1. for 关键字，表示循环控制 

2. for 有四要素: (1)循环变量初始化；(2)循环条件；(3)循环操作；(4)循环变量迭代 
3. 循环操作 , 这里可以有多条语句 
4. 如果循环操作(语句) 只有一条语句，可以省略 {}, 建议不要省略

![image-20220614144526755](https://cdn.jsdelivr.net/gh/Ninnaneve/my_pic@main/image-20220614144526755.png)

注意事项和细节说明：

1. 循环条件是返回一个布尔值的表达式 

2) for(;循环判断条件;) 中的初始化和变量迭代可以写到其它地方，但是两边的分号不能省略。

> 例如，
>
> ```java
> int i = 1; // 可能循环结束还需要使用i这个变量，因此写在外面，且在循环结束后i = 11
> for (;i <= 10;){
>     ...;
>     i++;
> }
> ```
>
> 补充，下列代码表示一个死循环。
>
> ```java
> for (;;){
>     ...;
> }
> ```
>
> 

3. 循环初始值可以有多条初始化语句，但要求类型一样，并且中间用逗号隔开，循环变量迭代也可以有多条变量迭代语句，中间用逗号隔开。

> 例如，
>
> ```java
> int count = 3;
> for (int i = 0, j = 0; i < count; i++, j += 2){
>     System.out.println("i=" + i + " j=" + j);
> }
> ```
>
> 

P.S. 编程思想——化繁为简，先死后活

- 化繁为简：将复杂的需求拆解成简单的需求，逐步完成
- 先死后活：先考虑固定的值，然后转成可以灵活变化的值

> 例如，要打印 1~100 之间所有是 9 的倍数的整数，统计个数及总和。
>
> 为了适应更好的需求，把范围开始值和结束值做出变量，即将for循环中固定的1和100分别定义start和end变量，甚至可以将倍数也定义一个变量。

## 5.8 while 循环控制

基本语法：

```java
循环变量初始化;
while (循环条件){
    循环体(语句);
    循环变量迭代;
}
```

说明：

- while循环也有四要素，只是四要素放的位置和for不一样

![image-20220614153757796](https://cdn.jsdelivr.net/gh/Ninnaneve/my_pic@main/image-20220614153757796.png)

注意事项和细节说明：

1) 循环条件是返回一个布尔值的表达式 
2) while 循环是先判断再执行语句 



## 5.9 do..while 循环控制

基本语法：

```java
循环变量初始化;
do{
    循环体(语句);
    循环变量迭代;
}while(循环条件);
```

说明：

1. do while 是关键字
2. 也有循环四要素, 只是位置不一样
3. 先执行，再判断，也就是说，**一定会至少执行一次** 
4. 最后 有一个 分号 ; 

![image-20220614160039459](https://cdn.jsdelivr.net/gh/Ninnaneve/my_pic@main/image-20220614160039459.png)

注意事项和细节说明：

1) 循环条件是返回一个布尔值的表达式
2)  do..while 循环是先执行，再判断， 因此它至少执行一次

## 5.10 多重循环控制(难点! 重点!) 

介绍：

1. 将一个循环放在另一个循环体内，就形成了嵌套循环。其中，for ,while ,do…while 均可以作为外层循环和内层循环。 

   > 建议一般使用两层，最多不要超过 3 层, 否则，代码的可读性很差

2. 实质上，嵌套循环就是把内层循环当成外层循环的循环体。当只有内层循环的循环条件为 false 时，才会完全跳出内层循环，才可结束外层的当次循环，开始下一次的循环。

3. 设外层循环次数为 m 次，内层为 n 次，则内层循环体实际上需要执行 m*n次

> P.S.
>
> print 输出不换行
>
> println 输出自动换行

经典例子分析：

- 编写一个程序，可以接收一个整数,表示层数（totalLevel），打印出金字塔。

```java

		化繁为简
		1. 先打印一个矩形
		*****
		*****
		*****
		*****
		*****
		2. 打印半个金字塔

		*    	//第1层 有 1个*
		**   	//第2层 有 2个*
		***		//第3层 有 3个*
		****    //第4层 有 4个*
		*****   //第5层 有 5个*
		
		3. 打印整个金字塔
		*       //第1层 有 1个*   2 * 1 -1   有4=(总层数-1)个空格
	   ***      //第2层 有 3个*   2 * 2 -1   有3=(总层数-2)个空格
	  *****     //第3层 有 5个*   2 * 3 -1   有2=(总层数-3)个空格
	 *******    //第4层 有 7个*   2 * 4 -1   有1=(总层数-4)个空格
	*********   //第5层 有 9个*   2 * 5 -1   有0=(总层数-5)个空格

		4. 打印空心的金字塔 [最难的]
	    *       //第1层 有 1个*   当前行的第一个位置是*,最后一个位置也是*
	   * *      //第2层 有 2个*   当前行的第一个位置是*,最后一个位置也是*
	  *   *     //第3层 有 2个*   当前行的第一个位置是*,最后一个位置也是*
	 *     *    //第4层 有 2个*   当前行的第一个位置是*,最后一个位置也是*
	*********   //第5层 有 9个*   全部输出*
	
		先死后活
		5 层数做成变量 int totalLevel = 5;
```



## 5.11 跳转控制语句-break

break 语句用于终止某个语句块的执行，一般使用在 switch 或者循环[for , while , do-while]中 

基本语法：

```java
{
    ...;
    break;
    ...;
}
```

> P.S. 随机数[0.0, 1.0)：Math.random()

注意事项和细节说明：

- break语句出现在多层嵌套的语句块中，可以通过标签知名要终止的是哪一层语句块
- 标签的基本使用

```java
label1:{...
label2:		{...
label3:			{...;
                 break;
                 ...;
				}
			}
		}
```

例如，

```java
abc1:
for(int j = 0; j < 4; j++){ //外层for
    abc2:
    for(int i = 0; i < 10; i++){ //内层for
        if(i == 2){
            //break; //等价 break abc2，输出4组0、1
            break abc1; // 输出1组0、1
        }
        System.out.println("i = " + i);
    }
}   
```

## 5.12 跳转控制语句-continue

- continue 语句用于结束本次循环，继续执行下一次循环。
- continue 语句出现在多层嵌套的循环语句体中时，可以通过标签指明要跳过的是哪一层循环 , 这个和前面的标签的 使用的规则一样

基本语法：

```java
{
    ...;
    continue;
    ...;
}
```

注意事项和细节说明：

- continue 语句出现在多层嵌套的语句块中，可以通过标签知名要终止的是哪一层语句块

## 5.13 跳转控制语句-return 

return 使用在方法，表示跳出所在的方法。注意：如果 return 写在 main 方法，表示退出程序。
